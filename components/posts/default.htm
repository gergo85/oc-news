{% set posts = __SELF__.posts %}

<div class="post-list">
    {% for post in posts %}
    <div class="post-item">
        {% if post.image %}<div class="post-image"><a href="{{ post.url }}"><img src="{{ post.image|media }}" alt="{{ post.title }}"></a></div>{% endif %}

        <h2 class="post-title"><a href="{{ post.url }}">{{ post.title }}</a></h2>
        <p class="post-date">{{ post.published_at|date('Y-m-d') }}</p>
        {% if post.tags %}
        <p class="post-tags">Tags:
            {% for tag in post.tags %}
            <a href="{{ 'blog'|page }}/tag/{{ tag }}">{{ tag }}</a>{% if not loop.last %},{% endif %}
            {% endfor %}
        </p>
        {% endif %}

        {% if post.introductory %}
        <div class="post-introductory">{{ post.introductory|raw }}</div>
        {% elseif post.content %}
        <div class="post-content">{{ post.content|raw }}</div>
        {% endif %}
    </div>
    {% else %}
    <span class="post-nodata">{{ noPostsMessage }}</span>
    {% endfor %}
</div>

{{ posts.render|raw }}
